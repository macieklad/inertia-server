---
title: Elysia
description: 'Using Inertia Server with Elysia'
---

# Elysia Adapter

The Elysia adapter integrates Inertia Server with the Elysia framework.

## Installation

```bash
bun add elysia inertia-server
```

## Basic Setup

```typescript
import { Elysia } from 'elysia';
import { createInertia, prop } from 'inertia-server';
import { elysiaAdapter } from 'inertia-server/elysia';
import { renderToString } from 'react-dom/server';

// Create Inertia instance
const { definePage, createHelper } = createInertia({
  version: '1.0.0',
  render: (pageData) => renderToString(<Root page={pageData} />),
});

// Define pages
const homePage = definePage({
  component: 'Home',
  props: {
    title: prop<string>(),
  },
});

// Create Inertia plugin
const inertiaPlugin = elysiaAdapter(createHelper);

// Create app with Inertia
const app = new Elysia()
  .use(inertiaPlugin)
  .get('/', ({ inertia }) => {
    return inertia.render(homePage({ title: 'Hello' }));
  })
  .listen(3000);
```

## Context Extensions

The adapter adds an `inertia` object to the Elysia context:

```typescript
app.get('/example', ({ inertia }) => {
  // Render a page
  inertia.render(homePage({ title: 'Example' }));
  
  // Set errors
  inertia.errors({ field: 'error' });
  
  // Redirect
  inertia.redirect('/path');
  
  // External redirect
  inertia.location('https://external.com');
  
  // Encrypt history
  inertia.encryptHistory();
  
  // Clear history
  inertia.clearHistory();
});
```

## Route Groups

```typescript
const app = new Elysia()
  .use(inertiaPlugin)
  .group('/admin', (app) =>
    app
      .get('/', ({ inertia }) => 
        inertia.render(adminDashboard({ ... }))
      )
      .get('/users', ({ inertia }) => 
        inertia.render(adminUsers({ ... }))
      )
  );
```

## With Static Plugin

For serving built assets in production:

```typescript
import { staticPlugin } from '@elysiajs/static';

const IS_PROD = process.env.NODE_ENV === 'production';

const app = new Elysia()
  .use(inertiaPlugin);

if (IS_PROD) {
  app.use(staticPlugin({
    assets: 'dist/client',
    prefix: '/assets',
  }));
}
```

## Error Handling

```typescript
app.post('/users', ({ inertia, body }) => {
  try {
    const user = await createUser(body);
    inertia.flash('success', 'User created!');
    return inertia.redirect('/users');
  } catch (error) {
    if (error instanceof ValidationError) {
      inertia.errors(error.errors);
      return inertia.redirect('/users/create');
    }
    throw error;
  }
});
```

## TypeScript Support

The adapter is fully typed. Types are automatically inferred when using the plugin:

```typescript
// Types are automatically inferred from the plugin
app.get('/', ({ inertia }) => {
  // Full autocomplete for inertia methods
});
```
